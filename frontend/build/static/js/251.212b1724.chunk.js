"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[251],{6251:(e,t,s)=>{s.r(t),s.d(t,{default:()=>N});var r=s(4919),a=s(5043),l=s(3248),n=s(7029),c=s(7097),o=s(6767),d=s(5469),i=s(5087),x=s(8693),m=s(6567),g=s(2300),u=s(67),h=s(3017),b=s(9855),p=s(4505),y=s(579);const f=e=>{let{block:t,isActive:s,onSelect:a,onUpdate:l,onDelete:n,onMoveUp:c,onMoveDown:o,canMoveUp:d,canMoveDown:i}=e;return(0,y.jsxs)("div",{className:"border rounded-lg p-4 cursor-pointer transition-colors ".concat(s?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"),onClick:a,children:[(0,y.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,y.jsx)("h3",{className:"text-sm font-medium text-gray-900 capitalize",children:t.type.replace("_"," ")}),(0,y.jsxs)("div",{className:"flex items-center space-x-1",children:[d&&(0,y.jsx)("button",{onClick:e=>{e.stopPropagation(),c()},className:"p-1 text-gray-400 hover:text-gray-600",children:(0,y.jsx)(h.A,{className:"h-4 w-4 rotate-180"})}),i&&(0,y.jsx)("button",{onClick:e=>{e.stopPropagation(),o()},className:"p-1 text-gray-400 hover:text-gray-600",children:(0,y.jsx)(h.A,{className:"h-4 w-4"})}),(0,y.jsx)("button",{onClick:e=>{e.stopPropagation(),n()},className:"p-1 text-red-400 hover:text-red-600",children:(0,y.jsx)(b.A,{className:"h-4 w-4"})})]})]}),(()=>{switch(t.type){case"hero_banner":return(0,y.jsxs)("div",{className:"bg-gradient-to-r from-blue-500 to-purple-600 text-white p-8 rounded-lg",children:[(0,y.jsx)("h2",{className:"text-3xl font-bold mb-2",children:t.config.title||"Hero Title"}),(0,y.jsx)("p",{className:"text-xl mb-4",children:t.config.subtitle||"Hero subtitle text"}),(0,y.jsx)("button",{className:"bg-white text-blue-600 px-6 py-2 rounded-lg font-medium",children:t.config.cta_text||"Call to Action"})]});case"text_block":return(0,y.jsx)("div",{className:"prose prose-sm",children:(0,y.jsx)("div",{dangerouslySetInnerHTML:{__html:t.config.content||"<p>Your text content will appear here...</p>"}})});default:return(0,y.jsx)("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center",children:(0,y.jsxs)("p",{className:"text-gray-500",children:[t.type.replace("_"," ").toUpperCase()," Block"]})})}})(),(()=>{if(!s)return null;switch(t.type){case"hero_banner":return(0,y.jsxs)("div",{className:"mt-4 p-4 border border-gray-200 rounded-lg bg-gray-50",children:[(0,y.jsx)("h4",{className:"text-sm font-medium text-gray-900 mb-3",children:"Hero Banner Settings"}),(0,y.jsxs)("div",{className:"space-y-3",children:[(0,y.jsx)("input",{type:"text",placeholder:"Hero title",value:t.config.title||"",onChange:e=>l((0,r.A)((0,r.A)({},t.config),{},{title:e.target.value})),className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm"}),(0,y.jsx)("input",{type:"text",placeholder:"Subtitle",value:t.config.subtitle||"",onChange:e=>l((0,r.A)((0,r.A)({},t.config),{},{subtitle:e.target.value})),className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm"}),(0,y.jsx)("input",{type:"text",placeholder:"Button text",value:t.config.cta_text||"",onChange:e=>l((0,r.A)((0,r.A)({},t.config),{},{cta_text:e.target.value})),className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm"})]})]});case"text_block":return(0,y.jsxs)("div",{className:"mt-4 p-4 border border-gray-200 rounded-lg bg-gray-50",children:[(0,y.jsx)("h4",{className:"text-sm font-medium text-gray-900 mb-3",children:"Text Content"}),(0,y.jsx)("textarea",{placeholder:"Enter your content...",value:t.config.content||"",onChange:e=>l((0,r.A)((0,r.A)({},t.config),{},{content:e.target.value})),rows:6,className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm"})]});default:return(0,y.jsx)("div",{className:"mt-4 p-4 border border-gray-200 rounded-lg bg-gray-50",children:(0,y.jsxs)("p",{className:"text-sm text-gray-500",children:["Configuration for ",t.type," will be available soon."]})})}})()]})},j=e=>{switch(e){case"hero_banner":return{title:"Welcome to Our Space",subtitle:"Discover the perfect workspace for your needs",cta_text:"Get Started",cta_link:"/contact"};case"text_block":return{content:"<p>Add your content here...</p>"};case"pricing_cards":return{title:"Choose Your Plan",plans:[]};default:return{}}},N=()=>{const{pageId:e}=(0,o.g)(),t=(0,o.Zp)(),s=(0,l.jE)(),h=!!e,[b,N]=(0,a.useState)({title:"",slug:"",meta_title:"",meta_description:"",content_blocks:[],status:"draft",is_homepage:!1}),[v,w]=(0,a.useState)(null),{data:k,isLoading:A}=(0,n.I)({queryKey:["cms-page",e],queryFn:()=>p.A.get("/cms/pages/".concat(e)).then((e=>e.data)),enabled:h});(0,a.useEffect)((()=>{k&&N(k)}),[k]);const _=(0,c.n)({mutationFn:t=>h?p.A.put("/cms/pages/".concat(e),t):p.A.post("/cms/pages",t),onSuccess:e=>{s.invalidateQueries(["cms-pages"]),h||t("/cms/pages/".concat(e.data.id,"/edit"))}}),C=e=>{const t={id:Date.now().toString(),type:e,config:j(e)};N((e=>(0,r.A)((0,r.A)({},e),{},{content_blocks:[...e.content_blocks,t]})))},S=(e,t)=>{const s=b.content_blocks.findIndex((t=>t.id===e));if(-1===s)return;const a="up"===t?s-1:s+1;if(a<0||a>=b.content_blocks.length)return;const l=[...b.content_blocks];[l[s],l[a]]=[l[a],l[s]],N((e=>(0,r.A)((0,r.A)({},e),{},{content_blocks:l})))};return A?(0,y.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,y.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):(0,y.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,y.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,y.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,y.jsx)("button",{onClick:()=>t("/cms/pages"),className:"p-2 text-gray-500 hover:text-gray-700",children:(0,y.jsx)(d.A,{className:"h-5 w-5"})}),(0,y.jsxs)("div",{children:[(0,y.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:h?"Edit Page":"Create New Page"}),(0,y.jsx)("p",{className:"text-sm text-gray-600",children:b.title||"Untitled Page"})]})]}),(0,y.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,y.jsxs)("button",{className:"inline-flex items-center px-3 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50",children:[(0,y.jsx)(i.A,{className:"h-4 w-4 mr-2"}),"Preview"]}),(0,y.jsxs)("button",{onClick:()=>{_.mutate(b)},disabled:_.isLoading,className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 disabled:opacity-50",children:[(0,y.jsx)(x.A,{className:"h-4 w-4 mr-2"}),_.isLoading?"Saving...":"Save"]})]})]}),(0,y.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[(0,y.jsxs)("div",{className:"lg:col-span-1 space-y-6",children:[(0,y.jsxs)("div",{className:"bg-white shadow rounded-lg p-4",children:[(0,y.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Page Settings"}),(0,y.jsxs)("div",{className:"space-y-4",children:[(0,y.jsxs)("div",{children:[(0,y.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Page Title"}),(0,y.jsx)("input",{type:"text",value:b.title,onChange:e=>N((t=>(0,r.A)((0,r.A)({},t),{},{title:e.target.value}))),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter page title..."})]}),(0,y.jsxs)("div",{children:[(0,y.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"URL Slug"}),(0,y.jsx)("input",{type:"text",value:b.slug,onChange:e=>N((t=>(0,r.A)((0,r.A)({},t),{},{slug:e.target.value}))),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"page-url"})]}),(0,y.jsxs)("div",{children:[(0,y.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),(0,y.jsxs)("select",{value:b.status,onChange:e=>N((t=>(0,r.A)((0,r.A)({},t),{},{status:e.target.value}))),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-blue-500 focus:border-blue-500",children:[(0,y.jsx)("option",{value:"draft",children:"Draft"}),(0,y.jsx)("option",{value:"published",children:"Published"}),(0,y.jsx)("option",{value:"archived",children:"Archived"})]})]}),(0,y.jsxs)("div",{className:"flex items-center",children:[(0,y.jsx)("input",{type:"checkbox",id:"is_homepage",checked:b.is_homepage,onChange:e=>N((t=>(0,r.A)((0,r.A)({},t),{},{is_homepage:e.target.checked}))),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),(0,y.jsx)("label",{htmlFor:"is_homepage",className:"ml-2 block text-sm text-gray-900",children:"Set as homepage"})]})]})]}),(0,y.jsxs)("div",{className:"bg-white shadow rounded-lg p-4",children:[(0,y.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Add Content Block"}),(0,y.jsxs)("div",{className:"space-y-2",children:[(0,y.jsxs)("button",{onClick:()=>C("hero_banner"),className:"w-full flex items-center p-3 text-left border border-gray-200 rounded-lg hover:bg-gray-50",children:[(0,y.jsx)(m.A,{className:"h-5 w-5 text-gray-500 mr-3"}),(0,y.jsxs)("div",{children:[(0,y.jsx)("p",{className:"text-sm font-medium text-gray-900",children:"Hero Banner"}),(0,y.jsx)("p",{className:"text-xs text-gray-500",children:"Large banner with title and CTA"})]})]}),(0,y.jsxs)("button",{onClick:()=>C("text_block"),className:"w-full flex items-center p-3 text-left border border-gray-200 rounded-lg hover:bg-gray-50",children:[(0,y.jsx)(g.A,{className:"h-5 w-5 text-gray-500 mr-3"}),(0,y.jsxs)("div",{children:[(0,y.jsx)("p",{className:"text-sm font-medium text-gray-900",children:"Text Block"}),(0,y.jsx)("p",{className:"text-xs text-gray-500",children:"Rich text content"})]})]}),(0,y.jsxs)("button",{onClick:()=>C("image_gallery"),className:"w-full flex items-center p-3 text-left border border-gray-200 rounded-lg hover:bg-gray-50",children:[(0,y.jsx)(u.A,{className:"h-5 w-5 text-gray-500 mr-3"}),(0,y.jsxs)("div",{children:[(0,y.jsx)("p",{className:"text-sm font-medium text-gray-900",children:"Image Gallery"}),(0,y.jsx)("p",{className:"text-xs text-gray-500",children:"Showcase multiple images"})]})]}),(0,y.jsxs)("button",{onClick:()=>C("pricing_cards"),className:"w-full flex items-center p-3 text-left border border-gray-200 rounded-lg hover:bg-gray-50",children:[(0,y.jsx)(m.A,{className:"h-5 w-5 text-gray-500 mr-3"}),(0,y.jsxs)("div",{children:[(0,y.jsx)("p",{className:"text-sm font-medium text-gray-900",children:"Pricing Cards"}),(0,y.jsx)("p",{className:"text-xs text-gray-500",children:"Display pricing plans"})]})]}),(0,y.jsxs)("button",{onClick:()=>C("lead_form"),className:"w-full flex items-center p-3 text-left border border-gray-200 rounded-lg hover:bg-gray-50",children:[(0,y.jsx)(m.A,{className:"h-5 w-5 text-gray-500 mr-3"}),(0,y.jsxs)("div",{children:[(0,y.jsx)("p",{className:"text-sm font-medium text-gray-900",children:"Contact Form"}),(0,y.jsx)("p",{className:"text-xs text-gray-500",children:"Lead capture form"})]})]})]})]})]}),(0,y.jsx)("div",{className:"lg:col-span-3",children:(0,y.jsx)("div",{className:"bg-white shadow rounded-lg min-h-screen",children:(0,y.jsxs)("div",{className:"p-6",children:[(0,y.jsx)("h2",{className:"text-lg font-medium text-gray-900 mb-6",children:"Page Content"}),b.content_blocks.length>0?(0,y.jsx)("div",{className:"space-y-4",children:b.content_blocks.map(((e,t)=>(0,y.jsx)(f,{block:e,isActive:v===e.id,onSelect:()=>w(e.id),onUpdate:t=>((e,t)=>{N((s=>(0,r.A)((0,r.A)({},s),{},{content_blocks:s.content_blocks.map((s=>s.id===e?(0,r.A)((0,r.A)({},s),{},{config:t}):s))})))})(e.id,t),onDelete:()=>{return t=e.id,void N((e=>(0,r.A)((0,r.A)({},e),{},{content_blocks:e.content_blocks.filter((e=>e.id!==t))})));var t},onMoveUp:()=>S(e.id,"up"),onMoveDown:()=>S(e.id,"down"),canMoveUp:t>0,canMoveDown:t<b.content_blocks.length-1},e.id)))}):(0,y.jsxs)("div",{className:"text-center py-12",children:[(0,y.jsx)(m.A,{className:"mx-auto h-12 w-12 text-gray-400"}),(0,y.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No content blocks"}),(0,y.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Get started by adding your first content block from the sidebar."})]})]})})})]})]})}}}]);
//# sourceMappingURL=251.212b1724.chunk.js.map