"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[479],{7479:(e,s,t)=>{t.r(s),t.d(s,{default:()=>j});var l=t(5043),i=t(7029),a=t(4505),o=t(7558),r=t(7118),n=t(1884),c=t(8646),d=t(1680),m=t(5088),v=t(3062),u=t(7033),x=t(3944),h=t(7300),g=t(1535),p=t(6767),y=t(579);const j=()=>{var e,s,t,j,b,f,N,_,w,A,k,C,z;const{translateTerm:M,translateObject:q,getDashboardConfig:D,getColorScheme:E,getModuleInfo:L,loading:I}=(0,o.K)(),{data:S,isLoading:G}=(0,i.I)({queryKey:["dashboard-enhanced"],queryFn:()=>a.A.get("/dashboard/enhanced").then((e=>e.data))}),K=D(),O=E(),P=L();l.useEffect((()=>{console.log("\ud83d\udcca Dashboard: Module data received",{moduleInfo:P,dashboardConfig:K,colorScheme:O,moduleLoading:I})}),[P,K,O,I]);const R=S?q({total_leads:(null===(e=S.metrics)||void 0===e?void 0:e.total_leads)||0,new_leads_this_month:(null===(s=S.metrics)||void 0===s?void 0:s.new_leads_this_month)||0,total_pages:(null===(t=S.metrics)||void 0===t?void 0:t.total_pages)||0,total_forms:(null===(j=S.metrics)||void 0===j?void 0:j.total_forms)||0,upcoming_tours:(null===(b=S.metrics)||void 0===b?void 0:b.upcoming_tours)||0,conversion_rate:(null===(f=S.metrics)||void 0===f?void 0:f.conversion_rate)||0,recent_leads:(null===(N=S.metrics)||void 0===N?void 0:N.recent_leads)||[],active_users:(null===(_=S.metrics)||void 0===_?void 0:_.active_users)||0,active_members:(null===(w=S.metrics)||void 0===w?void 0:w.active_members)||0,total_bookings:(null===(A=S.metrics)||void 0===A?void 0:A.total_bookings)||0,space_utilization:(null===(k=S.metrics)||void 0===k?void 0:k.space_utilization)||0,venue_revenue:(null===(C=S.metrics)||void 0===C?void 0:C.venue_revenue)||0,citizen_reservations:(null===(z=S.metrics)||void 0===z?void 0:z.citizen_reservations)||0}):null,T={users:r.A,members:r.A,citizens:r.A,guests:r.A,leads:n.A,prospects:n.A,inquiries:n.A,bookings:c.A,reservations:c.A,pages:d.A,forms:d.A,tours:m.A,revenue:v.A,utilization:u.A,satisfaction:x.A,conversion:h.A},F=e=>{const s=e.toLowerCase();for(const[t,l]of Object.entries(T))if(s.includes(t))return l;return h.A};if(G||I)return(0,y.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,y.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2",style:{borderColor:O.primary}})});const Q=[{name:M("users"),value:(null===R||void 0===R?void 0:R.active_users)||(null===R||void 0===R?void 0:R.active_members)||(null===R||void 0===R?void 0:R.citizen_reservations)||0,icon:r.A,change:"+12%"},{name:M("bookings"),value:(null===R||void 0===R?void 0:R.total_bookings)||0,icon:c.A,change:"+5%"},{name:M("pages"),value:(null===R||void 0===R?void 0:R.total_pages)||0,icon:d.A,change:"0%"},{name:M("conversion_rate"),value:"".concat((null===R||void 0===R?void 0:R.conversion_rate)||0,"%"),icon:h.A,change:"+8%"}];return(0,y.jsxs)("div",{className:"space-y-6",children:[(0,y.jsxs)("div",{className:"flex justify-between items-center",children:[(0,y.jsxs)("div",{children:[(0,y.jsx)("h1",{className:"text-2xl font-bold",style:{color:O.text},children:M("Dashboard")}),(0,y.jsxs)("p",{className:"text-gray-600 mt-1",children:[M("Welcome to")," ",P.name]})]}),(0,y.jsx)("div",{className:"text-sm text-gray-500",children:(0,g.GP)(new Date,"EEEE, MMMM d, yyyy")})]}),(0,y.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:Q.map((e=>{const s=e.icon;return(0,y.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,y.jsxs)("div",{className:"flex items-center justify-between",children:[(0,y.jsxs)("div",{children:[(0,y.jsx)("p",{className:"text-sm font-medium text-gray-600",children:e.name}),(0,y.jsx)("p",{className:"text-2xl font-bold mt-2",style:{color:O.text},children:e.value})]}),(0,y.jsx)("div",{className:"p-3 rounded-full",style:{backgroundColor:"".concat(O.primary,"15")},children:(0,y.jsx)(s,{className:"h-6 w-6",style:{color:O.primary}})})]}),(0,y.jsxs)("div",{className:"mt-4 flex items-center",children:[(0,y.jsx)("span",{className:"text-sm font-medium text-green-600",children:e.change}),(0,y.jsx)("span",{className:"text-sm text-gray-500 ml-2",children:M("from last month")})]})]},e.name)}))}),K.widgets&&K.widgets.length>0&&(0,y.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:K.widgets.map((e=>{var s,t,l;switch(e.type){case"community_stats":case"facility_status":case"revenue_summary":return(0,y.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",style:{gridColumn:"span ".concat((null===(s=e.position)||void 0===s?void 0:s.span)||1)},children:[(0,y.jsx)("h3",{className:"text-lg font-semibold mb-4",style:{color:O.text},children:M(e.title)}),(0,y.jsx)("div",{className:"grid grid-cols-1 gap-4",children:null===(t=e.metrics)||void 0===t?void 0:t.map((e=>{const s=(null===R||void 0===R?void 0:R[e])||0,t=F(e);return(0,y.jsxs)("div",{className:"flex items-center",children:[(0,y.jsx)(t,{className:"h-5 w-5 mr-3",style:{color:O.primary}}),(0,y.jsxs)("div",{children:[(0,y.jsx)("p",{className:"text-sm text-gray-600",children:M(e.replace(/_/g," "))}),(0,y.jsx)("p",{className:"text-xl font-bold",style:{color:O.text},children:"number"===typeof s&&e.includes("rate")?"".concat(s,"%"):"number"===typeof s&&e.includes("revenue")?"$".concat(s.toLocaleString()):s})]})]},e)}))})]},e.title);case"booking_overview":case"reservation_overview":return(0,y.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",style:{gridColumn:"span ".concat((null===(l=e.position)||void 0===l?void 0:l.span)||1)},children:[(0,y.jsx)("h3",{className:"text-lg font-semibold mb-4",style:{color:O.text},children:M(e.title)}),(0,y.jsxs)("div",{className:"space-y-3",children:[(0,y.jsxs)("div",{className:"flex justify-between items-center",children:[(0,y.jsx)("span",{className:"text-gray-600",children:M("Today's bookings")}),(0,y.jsx)("span",{className:"font-bold",style:{color:O.text},children:(null===R||void 0===R?void 0:R.total_bookings)||0})]}),(0,y.jsxs)("div",{className:"flex justify-between items-center",children:[(0,y.jsx)("span",{className:"text-gray-600",children:M("Utilization Rate")}),(0,y.jsxs)("span",{className:"font-bold",style:{color:O.text},children:[(null===R||void 0===R?void 0:R.space_utilization)||0,"%"]})]})]})]},e.title);default:return null}}))}),K.quick_actions&&K.quick_actions.length>0&&(0,y.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,y.jsx)("h3",{className:"text-lg font-semibold mb-4",style:{color:O.text},children:M("Quick Actions")}),(0,y.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:K.quick_actions.map((e=>{const s=F(e.name);return(0,y.jsxs)("button",{className:"p-4 border border-gray-200 rounded-lg hover:shadow-md transition-shadow",style:{borderColor:"".concat(O.primary,"30")},children:[(0,y.jsx)(s,{className:"h-6 w-6 mb-2",style:{color:O.primary}}),(0,y.jsx)("p",{className:"text-sm font-medium",style:{color:O.text},children:M(e.name)})]},e.name)}))})]}),(null===R||void 0===R?void 0:R.recent_leads)&&R.recent_leads.length>0&&(0,y.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[(0,y.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,y.jsx)("h3",{className:"text-lg font-semibold",style:{color:O.text},children:M("Recent Leads")})}),(0,y.jsxs)("div",{className:"p-6",children:[(0,y.jsx)("div",{className:"space-y-4",children:R.recent_leads.slice(0,5).map((e=>(0,y.jsxs)("div",{className:"flex items-center justify-between py-3 border-b border-gray-100 last:border-0",children:[(0,y.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,y.jsx)("div",{className:"w-8 h-8 rounded-full flex items-center justify-center",style:{backgroundColor:"".concat(O.primary,"15")},children:(0,y.jsx)(n.A,{className:"h-4 w-4",style:{color:O.primary}})}),(0,y.jsxs)("div",{children:[(0,y.jsx)("p",{className:"font-medium",style:{color:O.text},children:e.name}),(0,y.jsx)("p",{className:"text-sm text-gray-500",children:e.email})]})]}),(0,y.jsxs)("div",{className:"text-right",children:[(0,y.jsx)("p",{className:"text-sm text-gray-500",children:M(e.status)}),(0,y.jsx)("p",{className:"text-xs text-gray-400",children:(0,g.GP)(new Date(e.created_at),"MMM d")})]})]},e.id)))}),(0,y.jsx)("div",{className:"mt-4 pt-4 border-t border-gray-200",children:(0,y.jsxs)(p.N_,{to:"/leads",className:"text-sm font-medium hover:underline",style:{color:O.primary},children:[M("View all leads")," \u2192"]})})]})]})]})}}}]);
//# sourceMappingURL=479.89f34315.chunk.js.map