"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[792],{5016:(e,t,a)=>{a.d(t,{A:()=>l,O:()=>c});var n=a(5043),s=a(6767),r=a(4505),o=a(579);const i=(0,n.createContext)(),l=()=>{const e=(0,n.useContext)(i);if(!e)throw new Error("useAuth must be used within an AuthProvider");return e},c=e=>{let{children:t}=e;const[a,l]=(0,n.useState)(null),[c,d]=(0,n.useState)(localStorage.getItem("token")),[u,m]=(0,n.useState)(!0),h=(0,s.Zp)();(0,n.useEffect)((()=>{if(c){r.A.defaults.headers.common.Authorization="Bearer ".concat(c);const t=localStorage.getItem("user");if(t)try{l(JSON.parse(t))}catch(e){console.error("Error parsing stored user data:",e),g()}m(!1)}else m(!1)}),[c]);const g=()=>{l(null),d(null),localStorage.removeItem("token"),localStorage.removeItem("user"),localStorage.removeItem("tenant_subdomain"),delete r.A.defaults.headers.common.Authorization,h("/login")},p={user:a,token:c,loading:u,isAuthenticated:!!a&&!!c,login:async(e,t,a)=>{try{const n=await r.A.post("/auth/login",{email:e,password:t},{params:{tenant_subdomain:a}}),{access_token:s,user:o}=n.data;return d(s),l(o),localStorage.setItem("token",s),localStorage.setItem("user",JSON.stringify(o)),localStorage.setItem("tenant_subdomain",a),r.A.defaults.headers.common.Authorization="Bearer ".concat(s),h("/dashboard"),{success:!0}}catch(o){var n,s;return{success:!1,error:(null===(n=o.response)||void 0===n||null===(s=n.data)||void 0===s?void 0:s.detail)||"Login failed"}}},register:async(e,t)=>{try{const a=await r.A.post("/auth/register",e,{params:{tenant_subdomain:t}}),{access_token:n,user:s}=a.data;return d(n),l(s),localStorage.setItem("token",n),localStorage.setItem("user",JSON.stringify(s)),localStorage.setItem("tenant_subdomain",t),r.A.defaults.headers.common.Authorization="Bearer ".concat(n),h("/dashboard"),{success:!0}}catch(s){var a,n;return{success:!1,error:(null===(a=s.response)||void 0===a||null===(n=a.data)||void 0===n?void 0:n.detail)||"Registration failed"}}},logout:g};return(0,o.jsx)(i.Provider,{value:p,children:t})}},7558:(e,t,a)=>{a.d(t,{K:()=>l,W:()=>c});var n=a(5043),s=a(5016),r=a(4505),o=a(579);const i=(0,n.createContext)(),l=()=>{const e=(0,n.useContext)(i);if(!e)throw new Error("useTenant must be used within a TenantProvider");return e},c=e=>{let{children:t}=e;const{user:a,isAuthenticated:l}=(0,s.A)(),[c,d]=(0,n.useState)(localStorage.getItem("tenant_subdomain")||"demo"),[u,m]=(0,n.useState)(null),[h,g]=(0,n.useState)(!1),[p,f]=(0,n.useState)(null);(0,n.useEffect)((()=>{const e=localStorage.getItem("tenant_subdomain");e&&d(e)}),[]);const v=async()=>{if(!l||null===a||void 0===a||!a.tenant_id)return console.log("\ud83d\udd04 TenantContext: Skipping module load - not authenticated or no tenant_id",{isAuthenticated:l,userId:null===a||void 0===a?void 0:a.id,tenantId:null===a||void 0===a?void 0:a.tenant_id}),void m(null);console.log("\ud83d\udd04 TenantContext: Starting module config load for tenant",a.tenant_id),g(!0),f(null);try{var e,t,n,s;const a=await r.A.get("/platform/experience");m(a.data),console.log("\ud83c\udfa8 TenantContext: Module config loaded successfully!",{moduleName:null===(e=a.data.module_info)||void 0===e?void 0:e.name,industry:null===(t=a.data.module_info)||void 0===t?void 0:t.industry,terminologyCount:Object.keys(a.data.terminology||{}).length,featuresCount:(null===(n=a.data.features)||void 0===n?void 0:n.length)||0,navigationCount:(null===(s=a.data.navigation)||void 0===s?void 0:s.length)||0})}catch(o){console.error("\u274c TenantContext: Failed to load module config:",o),f("Failed to load tenant configuration"),m({module_info:{name:"Claude Platform",industry:"general"},terminology:{},features:[],navigation:[],color_scheme:{primary:"#3B82F6",secondary:"#1E40AF"}})}finally{g(!1)}};(0,n.useEffect)((()=>{console.log("\ud83d\udd04 TenantContext: useEffect triggered",{isAuthenticated:l,userTenantId:null===a||void 0===a?void 0:a.tenant_id}),v()}),[l,null===a||void 0===a?void 0:a.tenant_id]),(0,n.useEffect)((()=>{var e,t,a,n;u&&(console.log("\ud83c\udfa8 TenantContext: Module config loaded successfully!",{moduleName:null===(e=u.module_info)||void 0===e?void 0:e.name,industry:null===(t=u.module_info)||void 0===t?void 0:t.industry,terminologyCount:Object.keys(u.terminology||{}).length,featuresCount:(null===(a=u.features)||void 0===a?void 0:a.length)||0,navigationCount:(null===(n=u.navigation)||void 0===n?void 0:n.length)||0}),window.moduleConfigForDebugging=u)}),[u]);const y=e=>null!==u&&void 0!==u&&u.terminology&&u.terminology[e]||e,x=e=>{if(null===u||void 0===u||!u.terminology)return e;if("string"===typeof e)return y(e);if(Array.isArray(e))return e.map((e=>x(e)));if(e&&"object"===typeof e){const t={};for(const[a,n]of Object.entries(e))t[a]=x(n);return t}return e},b={tenantSubdomain:c,setTenantSubdomain:d,moduleConfig:u,loading:h,error:p,translateTerm:y,translateTerms:e=>e.map((e=>y(e))),translateObject:x,isFeatureEnabled:e=>!(null===u||void 0===u||!u.features)&&u.features.includes(e),getNavigation:()=>(null===u||void 0===u?void 0:u.navigation)||[],getDashboardConfig:()=>(null===u||void 0===u?void 0:u.dashboard)||{},getColorScheme:()=>(null===u||void 0===u?void 0:u.color_scheme)||{primary:"#3B82F6",secondary:"#1E40AF",accent:"#EF4444",background:"#F9FAFB",text:"#111827"},getModuleInfo:()=>(null===u||void 0===u?void 0:u.module_info)||{name:"Claude Platform",industry:"general"},getBookingRules:()=>(null===u||void 0===u?void 0:u.booking_rules)||{},getResourceTypes:()=>(null===u||void 0===u?void 0:u.resource_types)||[],reloadConfig:v};return(0,o.jsx)(i.Provider,{value:b,children:t})}},2923:(e,t,a)=>{var n=a(5043),s=a(4391),r=a(1527),o=a(3248),i=a(6767),l=a(5016),c=a(7558),d=a(3658),u=a(5731),m=a(1680),h=a(7118),g=a(8646),p=a(7365),f=a(1884),v=a(7033),y=a(5264),x=a(9233),b=a(67),j=a(780),w=a(5247),A=a(4615),C=a(3190),_=a(4669),S=a(254),T=a(7300),N=a(2054),k=a(3944),P=a(614),E=a(9493),I=a(2983),O=a(579);const L={home:d.A,globe:u.A,"file-text":m.A,users:h.A,calendar:g.A,settings:p.A,"user-plus":f.A,"bar-chart":v.A,building:y.A,bell:x.A,image:b.A,clipboard:j.A,"calendar-check":w.A,"calendar-plus":A.A,briefcase:C.A,"message-square":_.A,"user-check":S.A,"trending-up":T.A,"check-circle":N.A,star:k.A,"user-group":h.A},z=e=>{var t,a,s;let{children:r}=e;const{user:o,logout:u}=(0,l.A)(),{getNavigation:m,getModuleInfo:h,getColorScheme:g,translateTerm:p,loading:f}=(0,c.K)(),v=(0,i.zy)(),[y,x]=n.useState(!1),b=m(),j=h(),w=g();n.useEffect((()=>{console.log("\ud83d\uddbc\ufe0f Layout: Module data received",{moduleInfo:j,navigationLength:b.length,colorScheme:w,moduleLoading:f})}),[j,b,w,f]);const A=(b.length>0?b:[{name:"Dashboard",path:"/dashboard",icon:"home",roles:["*"]},{name:"Website",path:"/cms/pages",icon:"globe",roles:["*"]},{name:"Forms",path:"/forms",icon:"file-text",roles:["*"]},{name:"Leads",path:"/leads",icon:"user-plus",roles:["*"]},{name:"Tours",path:"/tours",icon:"calendar",roles:["*"]},{name:"Analytics",path:"/analytics",icon:"bar-chart",roles:["*"]},{name:"Settings",path:"/settings",icon:"settings",roles:["*"]}]).filter((e=>{if(!o)return!1;const t=o.role,a=e.roles||["*"];return!!a.includes("*")||(!!a.includes(t)||"member"===t&&(e.name.toLowerCase().includes("dashboard")||"/dashboard"===e.path))})),C=e=>v.pathname===e||v.pathname.startsWith(e+"/"),_={primary:w.primary,secondary:w.secondary,background:w.background,text:w.text};return(0,O.jsxs)("div",{className:"min-h-screen",style:{backgroundColor:_.background},children:[y&&(0,O.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-75 z-40 lg:hidden",onClick:()=>x(!1)}),(0,O.jsxs)("div",{className:"\n        fixed inset-y-0 left-0 z-50 w-64 bg-white shadow-lg transform transition-transform duration-300 ease-in-out\n        ".concat(y?"translate-x-0":"-translate-x-full","\n        lg:translate-x-0 lg:static lg:inset-0\n      "),children:[(0,O.jsxs)("div",{className:"flex items-center justify-between h-16 px-6 border-b border-gray-200",children:[(0,O.jsx)("h1",{className:"text-xl font-bold",style:{color:_.text},children:j.name}),(0,O.jsx)("button",{className:"lg:hidden",onClick:()=>x(!1),children:(0,O.jsx)(P.A,{className:"h-6 w-6 text-gray-500"})})]}),f?(0,O.jsx)("div",{className:"flex items-center justify-center p-8",children:(0,O.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2",style:{borderColor:_.primary}})}):(0,O.jsx)("nav",{className:"mt-8 px-4",children:(0,O.jsx)("ul",{className:"space-y-2",children:A.map((e=>{const t=L[e.icon]||d.A,a=e.path||e.href;return(0,O.jsx)("li",{children:(0,O.jsxs)(i.N_,{to:a,className:"\n                        flex items-center px-4 py-3 text-sm font-medium rounded-lg transition-colors\n                        ".concat(C(a)?"text-white":"text-gray-600 hover:bg-gray-100 hover:text-gray-900","\n                      "),style:C(a)?{backgroundColor:_.primary,color:"white"}:{},onClick:()=>x(!1),children:[(0,O.jsx)(t,{className:"h-5 w-5 mr-3"}),p(e.name)]})},e.name)}))})}),(0,O.jsx)("div",{className:"absolute bottom-0 left-0 right-0 p-4 border-t border-gray-200",children:(0,O.jsxs)("div",{className:"flex items-center justify-between",children:[(0,O.jsxs)("div",{className:"flex items-center",children:[(0,O.jsx)("div",{className:"w-8 h-8 rounded-full flex items-center justify-center",style:{backgroundColor:_.primary},children:(0,O.jsxs)("span",{className:"text-white text-sm font-medium",children:[null===o||void 0===o||null===(t=o.first_name)||void 0===t?void 0:t.charAt(0),null===o||void 0===o||null===(a=o.last_name)||void 0===a?void 0:a.charAt(0)]})}),(0,O.jsxs)("div",{className:"ml-3",children:[(0,O.jsxs)("p",{className:"text-sm font-medium",style:{color:_.text},children:[null===o||void 0===o?void 0:o.first_name," ",null===o||void 0===o?void 0:o.last_name]}),(0,O.jsx)("p",{className:"text-xs text-gray-500 capitalize",children:p(null===o||void 0===o||null===(s=o.role)||void 0===s?void 0:s.replace("_"," "))})]})]}),(0,O.jsx)("button",{onClick:u,className:"p-2 text-gray-500 hover:text-gray-700 transition-colors",children:(0,O.jsx)(E.A,{className:"h-4 w-4"})})]})})]}),(0,O.jsxs)("div",{className:"lg:ml-64",children:[(0,O.jsx)("div",{className:"bg-white shadow-sm border-b border-gray-200",children:(0,O.jsxs)("div",{className:"flex items-center justify-between h-16 px-6",children:[(0,O.jsx)("button",{className:"lg:hidden",onClick:()=>x(!0),children:(0,O.jsx)(I.A,{className:"h-6 w-6 text-gray-500"})}),(0,O.jsx)("div",{className:"flex items-center space-x-4",children:(0,O.jsxs)("span",{className:"text-sm text-gray-500",children:[p("Welcome back"),", ",null===o||void 0===o?void 0:o.first_name,"!"]})})]})}),(0,O.jsx)("main",{className:"p-6",children:r})]})]})},M=e=>{let{children:t}=e;const{user:a,loading:n}=(0,l.A)();return n?(0,O.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,O.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):a?t:(0,O.jsx)(i.C5,{to:"/login",replace:!0})},F=e=>{let{size:t="medium",message:a="Loading..."}=e;return(0,O.jsxs)("div",{className:"flex flex-col items-center justify-center p-8",children:[(0,O.jsx)("div",{className:"".concat({small:"w-4 h-4",medium:"w-8 h-8",large:"w-12 h-12"}[t]," animate-spin rounded-full border-2 border-gray-300 border-t-blue-600")}),a&&(0,O.jsx)("p",{className:"mt-2 text-sm text-gray-600",children:a})]})};var q=a(3400);const R=(0,n.lazy)((()=>a.e(93).then(a.bind(a,9093)))),D=(0,n.lazy)((()=>a.e(801).then(a.bind(a,3801)))),B=(0,n.lazy)((()=>Promise.all([a.e(96),a.e(479)]).then(a.bind(a,7479)))),K=(0,n.lazy)((()=>Promise.all([a.e(96),a.e(313)]).then(a.bind(a,2313)))),W=(0,n.lazy)((()=>Promise.all([a.e(96),a.e(251)]).then(a.bind(a,6251)))),U=(0,n.lazy)((()=>Promise.all([a.e(96),a.e(680)]).then(a.bind(a,6680)))),H=(0,n.lazy)((()=>Promise.all([a.e(96),a.e(550)]).then(a.bind(a,1550)))),G=(0,n.lazy)((()=>Promise.all([a.e(96),a.e(344)]).then(a.bind(a,344)))),J=(0,n.lazy)((()=>Promise.all([a.e(96),a.e(736)]).then(a.bind(a,2736)))),V=(0,n.lazy)((()=>Promise.all([a.e(96),a.e(60)]).then(a.bind(a,5060)))),X=(0,n.lazy)((()=>Promise.all([a.e(96),a.e(202)]).then(a.bind(a,2202)))),Z=new r.E({defaultOptions:{queries:{retry:1,retryDelay:e=>Math.min(1e3*2**e,3e4),refetchOnWindowFocus:!1,refetchOnReconnect:!0,staleTime:3e5,cacheTime:6e5,refetchInterval:!1,refetchIntervalInBackground:!1},mutations:{retry:1,retryDelay:e=>Math.min(1e3*2**e,3e4)}}});n.useEffect((()=>{"undefined"!==typeof window&&window.addEventListener("load",(()=>{const e=performance.getEntriesByType("navigation")[0];e&&q.Ay.recordMetric("PAGE_LOAD",e.loadEventEnd-e.fetchStart),q.Ay.trackBundleSize(),setInterval((()=>{q.Ay.trackMemoryUsage()}),3e4)}))}),[]);const Q=function(){return(0,O.jsx)(o.Ht,{client:Z,children:(0,O.jsx)("div",{className:"App",children:(0,O.jsx)(i.Kd,{children:(0,O.jsx)(l.O,{children:(0,O.jsx)(c.W,{children:(0,O.jsx)(n.Suspense,{fallback:(0,O.jsx)(F,{}),children:(0,O.jsxs)(i.BV,{children:[(0,O.jsx)(i.qh,{path:"/login",element:(0,O.jsx)(R,{})}),(0,O.jsx)(i.qh,{path:"/register",element:(0,O.jsx)(D,{})}),(0,O.jsx)(i.qh,{path:"/",element:(0,O.jsx)(i.C5,{to:"/dashboard",replace:!0})}),(0,O.jsx)(i.qh,{path:"/*",element:(0,O.jsx)(M,{children:(0,O.jsx)(z,{children:(0,O.jsx)(n.Suspense,{fallback:(0,O.jsx)(F,{}),children:(0,O.jsxs)(i.BV,{children:[(0,O.jsx)(i.qh,{path:"/dashboard",element:(0,O.jsx)(B,{})}),(0,O.jsx)(i.qh,{path:"/cms/pages",element:(0,O.jsx)(K,{})}),(0,O.jsx)(i.qh,{path:"/cms/pages/new",element:(0,O.jsx)(W,{})}),(0,O.jsx)(i.qh,{path:"/cms/pages/:pageId/edit",element:(0,O.jsx)(W,{})}),(0,O.jsx)(i.qh,{path:"/forms",element:(0,O.jsx)(U,{})}),(0,O.jsx)(i.qh,{path:"/forms/new",element:(0,O.jsx)(H,{})}),(0,O.jsx)(i.qh,{path:"/forms/:formId/edit",element:(0,O.jsx)(H,{})}),(0,O.jsx)(i.qh,{path:"/leads",element:(0,O.jsx)(G,{})}),(0,O.jsx)(i.qh,{path:"/leads/:leadId",element:(0,O.jsx)(J,{})}),(0,O.jsx)(i.qh,{path:"/tours",element:(0,O.jsx)(V,{})}),(0,O.jsx)(i.qh,{path:"/settings",element:(0,O.jsx)(X,{})})]})})})})})]})})})})})})})};s.createRoot(document.getElementById("root")).render((0,O.jsx)(n.StrictMode,{children:(0,O.jsx)(Q,{})}))},4505:(e,t,a)=>{a.d(t,{A:()=>d});var n=a(1495),s=a(3400);const r=new Map,o=new Map,i=n.A.create({baseURL:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:"443",FAST_REFRESH:!0,REACT_APP_BACKEND_URL:"https://f34678c8-0dd8-48eb-b632-746c0874d7b6.preview.emergentagent.com"}.REACT_APP_API_URL||"/api",timeout:1e4,headers:{"Content-Type":"application/json"}});function l(e){const t={"/cms/templates":36e5,"/cms/pages":18e5,"/forms":18e5,"/leads":3e5,"/tours/slots":6e5};for(const[a,n]of Object.entries(t))if(e.includes(a))return n;return 0}async function c(e){const t="".concat(e.method,":").concat(e.url);if("get"===e.method){const a=r.get(t);if(a&&Date.now()-a.timestamp<l(e.url))return s.Ay.recordMetric("API_CACHE_HIT",0,{url:e.url,method:"GET"}),{data:a.data,fromCache:!0}}if(o.has(t))return o.get(t);const a=i(e);o.set(t,a);try{return await a}finally{o.delete(t)}}i.interceptors.request.use((e=>{e.metadata={startTime:performance.now()};const t=localStorage.getItem("tenantId");t&&(e.headers["X-Tenant-ID"]=t);const a=localStorage.getItem("authToken");return a&&(e.headers.Authorization="Bearer ".concat(a)),e}),(e=>Promise.reject(e))),i.interceptors.response.use((e=>{const t=performance.now()-e.config.metadata.startTime;if(s.Ay.recordMetric("API_CALL",t,{url:e.config.url,method:e.config.method.toUpperCase(),status:e.status,success:!0}),"get"===e.config.method&&200===e.status){const t="".concat(e.config.method,":").concat(e.config.url),a={data:e.data,timestamp:Date.now(),etag:e.headers.etag},n=l(e.config.url);n>0&&(r.set(t,a),setTimeout((()=>{r.delete(t)}),n))}return e}),(e=>{var t,a,n,r;const o=e.config?performance.now()-e.config.metadata.startTime:0;return s.Ay.recordMetric("API_ERROR",o,{url:(null===(t=e.config)||void 0===t?void 0:t.url)||"unknown",method:(null===(a=e.config)||void 0===a||null===(n=a.method)||void 0===n?void 0:n.toUpperCase())||"unknown",status:(null===(r=e.response)||void 0===r?void 0:r.status)||0,error:e.message}),Promise.reject(e)}));const d={login:async e=>(await c({method:"post",url:"/auth/login",data:e,params:{tenant_subdomain:window.location.hostname.split(".")[0]}})).data,register:async e=>(await c({method:"post",url:"/auth/register",data:e,params:{tenant_subdomain:window.location.hostname.split(".")[0]}})).data,async getPages(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(await c({method:"get",url:"/cms/pages",params:e})).data},getPage:async e=>(await c({method:"get",url:"/cms/pages/".concat(e)})).data,async createPage(e){const t=await c({method:"post",url:"/cms/pages",data:e});return this.invalidateCache("/cms/pages"),t.data},async updatePage(e,t){const a=await c({method:"put",url:"/cms/pages/".concat(e),data:t});return this.invalidateCache("/cms/pages"),this.invalidateCache("/cms/pages/".concat(e)),a.data},async deletePage(e){const t=await c({method:"delete",url:"/cms/pages/".concat(e)});return this.invalidateCache("/cms/pages"),this.invalidateCache("/cms/pages/".concat(e)),t.data},getForms:async()=>(await c({method:"get",url:"/forms"})).data,async createForm(e){const t=await c({method:"post",url:"/forms",data:e});return this.invalidateCache("/forms"),t.data},submitForm:async(e,t)=>(await c({method:"post",url:"/forms/".concat(e,"/submit"),data:t})).data,async getLeads(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(await c({method:"get",url:"/leads",params:e})).data},getLead:async e=>(await c({method:"get",url:"/leads/".concat(e)})).data,async createLead(e){const t=await c({method:"post",url:"/leads",data:e});return this.invalidateCache("/leads"),t.data},async updateLead(e,t){const a=await c({method:"put",url:"/leads/".concat(e),data:t});return this.invalidateCache("/leads"),this.invalidateCache("/leads/".concat(e)),a.data},async getTourSlots(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(await c({method:"get",url:"/tours/slots",params:e})).data},async bookTour(e){const t=await c({method:"post",url:"/tours/book",data:e});return this.invalidateCache("/tours/slots"),t.data},async getPerformanceMetrics(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return(await c({method:"get",url:"/performance/metrics",params:{hours:e}})).data},getCacheStats:async()=>(await c({method:"get",url:"/performance/cache/stats"})).data,invalidateCache(e){for(const[t]of r.entries())t.includes(e)&&r.delete(t)},clearCache(){r.clear(),o.clear()},getCacheInfo:()=>({cacheSize:r.size,pendingRequests:o.size,cacheEntries:Array.from(r.keys())})}},3400:(e,t,a)=>{a.d(t,{Ay:()=>r});var n=a(4919);const s=new class{constructor(){this.metrics=new Map,this.observers=new Map,this.initializeObservers()}initializeObservers(){if("PerformanceObserver"in window){const t=new PerformanceObserver((e=>{const t=e.getEntries(),a=t[t.length-1];this.recordMetric("LCP",a.startTime)}));try{t.observe({entryTypes:["largest-contentful-paint"]}),this.observers.set("lcp",t)}catch(e){console.warn("LCP observer not supported")}const a=new PerformanceObserver((e=>{e.getEntries().forEach((e=>{this.recordMetric("FID",e.processingStart-e.startTime)}))}));try{a.observe({entryTypes:["first-input"]}),this.observers.set("fid",a)}catch(e){console.warn("FID observer not supported")}let n=0;const s=new PerformanceObserver((e=>{e.getEntries().forEach((e=>{e.hadRecentInput||(n+=e.value,this.recordMetric("CLS",n))}))}));try{s.observe({entryTypes:["layout-shift"]}),this.observers.set("cls",s)}catch(e){console.warn("CLS observer not supported")}const r=new PerformanceObserver((e=>{e.getEntries().forEach((e=>{this.recordMetric("LONG_TASK",e.duration)}))}));try{r.observe({entryTypes:["longtask"]}),this.observers.set("longtask",r)}catch(e){console.warn("Long task observer not supported")}}}recordMetric(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const s=(0,n.A)({name:e,value:t,timestamp:Date.now(),url:window.location.pathname},a);this.metrics.has(e)||this.metrics.set(e,[]),this.metrics.get(e).push(s),this.sendToAnalytics(s),this.checkThresholds(s)}checkThresholds(e){const t={LCP:2500,FID:100,CLS:.1,LONG_TASK:50}[e.name];t&&e.value>t&&(console.warn("Performance issue detected: ".concat(e.name," = ").concat(e.value," (threshold: ").concat(t,")")),this.sendAlert(e,t))}sendToAnalytics(e){window.gtag&&window.gtag("event","performance_metric",{metric_name:e.name,metric_value:e.value,page_path:e.url})}sendAlert(e,t){fetch("/api/performance/alert",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({metric:e.name,value:e.value,threshold:t,url:e.url,timestamp:e.timestamp})}).catch((e=>console.warn("Failed to send performance alert:",e)))}getMetrics(){const e={};return this.metrics.forEach(((t,a)=>{const n=t[t.length-1],s=t.reduce(((e,t)=>e+t.value),0)/t.length;e[a]={latest:n.value,average:s,count:t.length,timestamp:n.timestamp}})),e}disconnect(){this.observers.forEach((e=>e.disconnect())),this.observers.clear()}};window.performanceTracker=s;const r=s}},e=>{e.O(0,[644,96],(()=>{return t=2923,e(e.s=t);var t}));e.O()}]);
//# sourceMappingURL=main.f81c3574.js.map