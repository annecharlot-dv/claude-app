{"version":3,"file":"static/js/251.212b1724.chunk.js","mappings":"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","sources":["pages/cms/PageEditor.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useQuery, useMutation, useQueryClient } from '@tanstack/react-query';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport { \n  Save, \n  Eye, \n  ArrowLeft, \n  Plus, \n  Move, \n  Trash2, \n  Settings,\n  Type,\n  Image,\n  Layout\n} from 'lucide-react';\nimport api from '../../services/api';\n\nconst PageEditor = () => {\n  const { pageId } = useParams();\n  const navigate = useNavigate();\n  const queryClient = useQueryClient();\n  const isEditing = !!pageId;\n\n  const [page, setPage] = useState({\n    title: '',\n    slug: '',\n    meta_title: '',\n    meta_description: '',\n    content_blocks: [],\n    status: 'draft',\n    is_homepage: false\n  });\n\n  const [activeBlock, setActiveBlock] = useState(null);\n\n  // Fetch existing page if editing\n  const { data: existingPage, isLoading } = useQuery({\n    queryKey: ['cms-page', pageId],\n    queryFn: () => api.get(`/cms/pages/${pageId}`).then(res => res.data),\n    enabled: isEditing\n  });\n\n  useEffect(() => {\n    if (existingPage) {\n      setPage(existingPage);\n    }\n  }, [existingPage]);\n\n  const savePage = useMutation({\n    mutationFn: (data) => {\n      if (isEditing) {\n        return api.put(`/cms/pages/${pageId}`, data);\n      } else {\n        return api.post('/cms/pages', data);\n      }\n    },\n    onSuccess: (response) => {\n      queryClient.invalidateQueries(['cms-pages']);\n      if (!isEditing) {\n        navigate(`/cms/pages/${response.data.id}/edit`);\n      }\n    },\n  });\n\n  const handleSave = () => {\n    savePage.mutate(page);\n  };\n\n  const addBlock = (type) => {\n    const newBlock = {\n      id: Date.now().toString(),\n      type,\n      config: getDefaultBlockConfig(type)\n    };\n    \n    setPage(prev => ({\n      ...prev,\n      content_blocks: [...prev.content_blocks, newBlock]\n    }));\n  };\n\n  const updateBlock = (blockId, config) => {\n    setPage(prev => ({\n      ...prev,\n      content_blocks: prev.content_blocks.map(block =>\n        block.id === blockId ? { ...block, config } : block\n      )\n    }));\n  };\n\n  const deleteBlock = (blockId) => {\n    setPage(prev => ({\n      ...prev,\n      content_blocks: prev.content_blocks.filter(block => block.id !== blockId)\n    }));\n  };\n\n  const moveBlock = (blockId, direction) => {\n    const blockIndex = page.content_blocks.findIndex(block => block.id === blockId);\n    if (blockIndex === -1) return;\n\n    const newIndex = direction === 'up' ? blockIndex - 1 : blockIndex + 1;\n    if (newIndex < 0 || newIndex >= page.content_blocks.length) return;\n\n    const newBlocks = [...page.content_blocks];\n    [newBlocks[blockIndex], newBlocks[newIndex]] = [newBlocks[newIndex], newBlocks[blockIndex]];\n\n    setPage(prev => ({\n      ...prev,\n      content_blocks: newBlocks\n    }));\n  };\n\n  if (isLoading) {\n    return (\n      <div className=\"flex items-center justify-center h-64\">\n        <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600\"></div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"max-w-7xl mx-auto\">\n      {/* Header */}\n      <div className=\"flex items-center justify-between mb-6\">\n        <div className=\"flex items-center space-x-4\">\n          <button\n            onClick={() => navigate('/cms/pages')}\n            className=\"p-2 text-gray-500 hover:text-gray-700\"\n          >\n            <ArrowLeft className=\"h-5 w-5\" />\n          </button>\n          <div>\n            <h1 className=\"text-2xl font-bold text-gray-900\">\n              {isEditing ? 'Edit Page' : 'Create New Page'}\n            </h1>\n            <p className=\"text-sm text-gray-600\">\n              {page.title || 'Untitled Page'}\n            </p>\n          </div>\n        </div>\n\n        <div className=\"flex items-center space-x-3\">\n          <button className=\"inline-flex items-center px-3 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50\">\n            <Eye className=\"h-4 w-4 mr-2\" />\n            Preview\n          </button>\n          \n          <button\n            onClick={handleSave}\n            disabled={savePage.isLoading}\n            className=\"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 disabled:opacity-50\"\n          >\n            <Save className=\"h-4 w-4 mr-2\" />\n            {savePage.isLoading ? 'Saving...' : 'Save'}\n          </button>\n        </div>\n      </div>\n\n      <div className=\"grid grid-cols-1 lg:grid-cols-4 gap-6\">\n        {/* Sidebar - Page Settings & Block Library */}\n        <div className=\"lg:col-span-1 space-y-6\">\n          {/* Page Settings */}\n          <div className=\"bg-white shadow rounded-lg p-4\">\n            <h3 className=\"text-lg font-medium text-gray-900 mb-4\">Page Settings</h3>\n            \n            <div className=\"space-y-4\">\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                  Page Title\n                </label>\n                <input\n                  type=\"text\"\n                  value={page.title}\n                  onChange={(e) => setPage(prev => ({ ...prev, title: e.target.value }))}\n                  className=\"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-blue-500 focus:border-blue-500\"\n                  placeholder=\"Enter page title...\"\n                />\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                  URL Slug\n                </label>\n                <input\n                  type=\"text\"\n                  value={page.slug}\n                  onChange={(e) => setPage(prev => ({ ...prev, slug: e.target.value }))}\n                  className=\"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-blue-500 focus:border-blue-500\"\n                  placeholder=\"page-url\"\n                />\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                  Status\n                </label>\n                <select\n                  value={page.status}\n                  onChange={(e) => setPage(prev => ({ ...prev, status: e.target.value }))}\n                  className=\"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-blue-500 focus:border-blue-500\"\n                >\n                  <option value=\"draft\">Draft</option>\n                  <option value=\"published\">Published</option>\n                  <option value=\"archived\">Archived</option>\n                </select>\n              </div>\n\n              <div className=\"flex items-center\">\n                <input\n                  type=\"checkbox\"\n                  id=\"is_homepage\"\n                  checked={page.is_homepage}\n                  onChange={(e) => setPage(prev => ({ ...prev, is_homepage: e.target.checked }))}\n                  className=\"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded\"\n                />\n                <label htmlFor=\"is_homepage\" className=\"ml-2 block text-sm text-gray-900\">\n                  Set as homepage\n                </label>\n              </div>\n            </div>\n          </div>\n\n          {/* Block Library */}\n          <div className=\"bg-white shadow rounded-lg p-4\">\n            <h3 className=\"text-lg font-medium text-gray-900 mb-4\">Add Content Block</h3>\n            \n            <div className=\"space-y-2\">\n              <button\n                onClick={() => addBlock('hero_banner')}\n                className=\"w-full flex items-center p-3 text-left border border-gray-200 rounded-lg hover:bg-gray-50\"\n              >\n                <Layout className=\"h-5 w-5 text-gray-500 mr-3\" />\n                <div>\n                  <p className=\"text-sm font-medium text-gray-900\">Hero Banner</p>\n                  <p className=\"text-xs text-gray-500\">Large banner with title and CTA</p>\n                </div>\n              </button>\n\n              <button\n                onClick={() => addBlock('text_block')}\n                className=\"w-full flex items-center p-3 text-left border border-gray-200 rounded-lg hover:bg-gray-50\"\n              >\n                <Type className=\"h-5 w-5 text-gray-500 mr-3\" />\n                <div>\n                  <p className=\"text-sm font-medium text-gray-900\">Text Block</p>\n                  <p className=\"text-xs text-gray-500\">Rich text content</p>\n                </div>\n              </button>\n\n              <button\n                onClick={() => addBlock('image_gallery')}\n                className=\"w-full flex items-center p-3 text-left border border-gray-200 rounded-lg hover:bg-gray-50\"\n              >\n                <Image className=\"h-5 w-5 text-gray-500 mr-3\" />\n                <div>\n                  <p className=\"text-sm font-medium text-gray-900\">Image Gallery</p>\n                  <p className=\"text-xs text-gray-500\">Showcase multiple images</p>\n                </div>\n              </button>\n\n              <button\n                onClick={() => addBlock('pricing_cards')}\n                className=\"w-full flex items-center p-3 text-left border border-gray-200 rounded-lg hover:bg-gray-50\"\n              >\n                <Layout className=\"h-5 w-5 text-gray-500 mr-3\" />\n                <div>\n                  <p className=\"text-sm font-medium text-gray-900\">Pricing Cards</p>\n                  <p className=\"text-xs text-gray-500\">Display pricing plans</p>\n                </div>\n              </button>\n\n              <button\n                onClick={() => addBlock('lead_form')}\n                className=\"w-full flex items-center p-3 text-left border border-gray-200 rounded-lg hover:bg-gray-50\"\n              >\n                <Layout className=\"h-5 w-5 text-gray-500 mr-3\" />\n                <div>\n                  <p className=\"text-sm font-medium text-gray-900\">Contact Form</p>\n                  <p className=\"text-xs text-gray-500\">Lead capture form</p>\n                </div>\n              </button>\n            </div>\n          </div>\n        </div>\n\n        {/* Main Content Area */}\n        <div className=\"lg:col-span-3\">\n          <div className=\"bg-white shadow rounded-lg min-h-screen\">\n            <div className=\"p-6\">\n              <h2 className=\"text-lg font-medium text-gray-900 mb-6\">Page Content</h2>\n              \n              {page.content_blocks.length > 0 ? (\n                <div className=\"space-y-4\">\n                  {page.content_blocks.map((block, index) => (\n                    <ContentBlock\n                      key={block.id}\n                      block={block}\n                      isActive={activeBlock === block.id}\n                      onSelect={() => setActiveBlock(block.id)}\n                      onUpdate={(config) => updateBlock(block.id, config)}\n                      onDelete={() => deleteBlock(block.id)}\n                      onMoveUp={() => moveBlock(block.id, 'up')}\n                      onMoveDown={() => moveBlock(block.id, 'down')}\n                      canMoveUp={index > 0}\n                      canMoveDown={index < page.content_blocks.length - 1}\n                    />\n                  ))}\n                </div>\n              ) : (\n                <div className=\"text-center py-12\">\n                  <Layout className=\"mx-auto h-12 w-12 text-gray-400\" />\n                  <h3 className=\"mt-2 text-sm font-medium text-gray-900\">No content blocks</h3>\n                  <p className=\"mt-1 text-sm text-gray-500\">\n                    Get started by adding your first content block from the sidebar.\n                  </p>\n                </div>\n              )}\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\n// Content Block Component\nconst ContentBlock = ({ \n  block, \n  isActive, \n  onSelect, \n  onUpdate, \n  onDelete, \n  onMoveUp, \n  onMoveDown,\n  canMoveUp,\n  canMoveDown \n}) => {\n  const renderBlockPreview = () => {\n    switch (block.type) {\n      case 'hero_banner':\n        return (\n          <div className=\"bg-gradient-to-r from-blue-500 to-purple-600 text-white p-8 rounded-lg\">\n            <h2 className=\"text-3xl font-bold mb-2\">\n              {block.config.title || 'Hero Title'}\n            </h2>\n            <p className=\"text-xl mb-4\">\n              {block.config.subtitle || 'Hero subtitle text'}\n            </p>\n            <button className=\"bg-white text-blue-600 px-6 py-2 rounded-lg font-medium\">\n              {block.config.cta_text || 'Call to Action'}\n            </button>\n          </div>\n        );\n      \n      case 'text_block':\n        return (\n          <div className=\"prose prose-sm\">\n            <div dangerouslySetInnerHTML={{ \n              __html: block.config.content || '<p>Your text content will appear here...</p>' \n            }} />\n          </div>\n        );\n      \n      default:\n        return (\n          <div className=\"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center\">\n            <p className=\"text-gray-500\">\n              {block.type.replace('_', ' ').toUpperCase()} Block\n            </p>\n          </div>\n        );\n    }\n  };\n\n  const renderBlockEditor = () => {\n    if (!isActive) return null;\n\n    switch (block.type) {\n      case 'hero_banner':\n        return (\n          <div className=\"mt-4 p-4 border border-gray-200 rounded-lg bg-gray-50\">\n            <h4 className=\"text-sm font-medium text-gray-900 mb-3\">Hero Banner Settings</h4>\n            <div className=\"space-y-3\">\n              <input\n                type=\"text\"\n                placeholder=\"Hero title\"\n                value={block.config.title || ''}\n                onChange={(e) => onUpdate({ ...block.config, title: e.target.value })}\n                className=\"w-full border border-gray-300 rounded-md px-3 py-2 text-sm\"\n              />\n              <input\n                type=\"text\"\n                placeholder=\"Subtitle\"\n                value={block.config.subtitle || ''}\n                onChange={(e) => onUpdate({ ...block.config, subtitle: e.target.value })}\n                className=\"w-full border border-gray-300 rounded-md px-3 py-2 text-sm\"\n              />\n              <input\n                type=\"text\"\n                placeholder=\"Button text\"\n                value={block.config.cta_text || ''}\n                onChange={(e) => onUpdate({ ...block.config, cta_text: e.target.value })}\n                className=\"w-full border border-gray-300 rounded-md px-3 py-2 text-sm\"\n              />\n            </div>\n          </div>\n        );\n      \n      case 'text_block':\n        return (\n          <div className=\"mt-4 p-4 border border-gray-200 rounded-lg bg-gray-50\">\n            <h4 className=\"text-sm font-medium text-gray-900 mb-3\">Text Content</h4>\n            <textarea\n              placeholder=\"Enter your content...\"\n              value={block.config.content || ''}\n              onChange={(e) => onUpdate({ ...block.config, content: e.target.value })}\n              rows={6}\n              className=\"w-full border border-gray-300 rounded-md px-3 py-2 text-sm\"\n            />\n          </div>\n        );\n      \n      default:\n        return (\n          <div className=\"mt-4 p-4 border border-gray-200 rounded-lg bg-gray-50\">\n            <p className=\"text-sm text-gray-500\">\n              Configuration for {block.type} will be available soon.\n            </p>\n          </div>\n        );\n    }\n  };\n\n  return (\n    <div \n      className={`border rounded-lg p-4 cursor-pointer transition-colors ${\n        isActive ? 'border-blue-500 bg-blue-50' : 'border-gray-200 hover:border-gray-300'\n      }`}\n      onClick={onSelect}\n    >\n      <div className=\"flex items-center justify-between mb-3\">\n        <h3 className=\"text-sm font-medium text-gray-900 capitalize\">\n          {block.type.replace('_', ' ')}\n        </h3>\n        <div className=\"flex items-center space-x-1\">\n          {canMoveUp && (\n            <button\n              onClick={(e) => { e.stopPropagation(); onMoveUp(); }}\n              className=\"p-1 text-gray-400 hover:text-gray-600\"\n            >\n              <Move className=\"h-4 w-4 rotate-180\" />\n            </button>\n          )}\n          {canMoveDown && (\n            <button\n              onClick={(e) => { e.stopPropagation(); onMoveDown(); }}\n              className=\"p-1 text-gray-400 hover:text-gray-600\"\n            >\n              <Move className=\"h-4 w-4\" />\n            </button>\n          )}\n          <button\n            onClick={(e) => { e.stopPropagation(); onDelete(); }}\n            className=\"p-1 text-red-400 hover:text-red-600\"\n          >\n            <Trash2 className=\"h-4 w-4\" />\n          </button>\n        </div>\n      </div>\n      \n      {renderBlockPreview()}\n      {renderBlockEditor()}\n    </div>\n  );\n};\n\nconst getDefaultBlockConfig = (type) => {\n  switch (type) {\n    case 'hero_banner':\n      return {\n        title: 'Welcome to Our Space',\n        subtitle: 'Discover the perfect workspace for your needs',\n        cta_text: 'Get Started',\n        cta_link: '/contact'\n      };\n    case 'text_block':\n      return {\n        content: '<p>Add your content here...</p>'\n      };\n    case 'pricing_cards':\n      return {\n        title: 'Choose Your Plan',\n        plans: []\n      };\n    default:\n      return {};\n  }\n};\n\nexport default PageEditor;"],"names":["ContentBlock","_ref","block","isActive","onSelect","onUpdate","onDelete","onMoveUp","onMoveDown","canMoveUp","canMoveDown","_jsxs","className","concat","onClick","children","_jsx","type","replace","e","stopPropagation","Move","Trash2","renderBlockPreview","config","title","subtitle","cta_text","dangerouslySetInnerHTML","__html","content","toUpperCase","renderBlockEditor","placeholder","value","onChange","_objectSpread","target","rows","getDefaultBlockConfig","cta_link","plans","PageEditor","pageId","useParams","navigate","useNavigate","queryClient","useQueryClient","isEditing","page","setPage","useState","slug","meta_title","meta_description","content_blocks","status","is_homepage","activeBlock","setActiveBlock","data","existingPage","isLoading","useQuery","queryKey","queryFn","api","get","then","res","enabled","useEffect","savePage","useMutation","mutationFn","put","post","onSuccess","response","invalidateQueries","id","addBlock","newBlock","Date","now","toString","prev","moveBlock","blockId","direction","blockIndex","findIndex","newIndex","length","newBlocks","ArrowLeft","Eye","handleSave","mutate","disabled","Save","checked","htmlFor","Layout","Type","Image","map","index","updateBlock","deleteBlock","filter"],"sourceRoot":""}