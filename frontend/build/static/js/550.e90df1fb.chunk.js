"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[550],{1550:(e,s,l)=>{l.r(s),l.d(s,{default:()=>h});var t=l(4919),a=l(5043),r=l(6767),d=l(3248),o=l(7097),n=l(5469),i=l(8693),c=l(1360),m=l(7365),x=l(9855),u=l(4505),p=l(579);const b=e=>{let{field:s,index:l,onUpdate:t,onDelete:r}=e;const[d,o]=(0,a.useState)(!1);return(0,p.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4",children:[(0,p.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,p.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,p.jsxs)("span",{className:"text-sm font-medium text-gray-500",children:["#",l+1]}),(0,p.jsx)("input",{type:"text",value:s.label,onChange:e=>t({label:e.target.value}),className:"font-medium text-gray-900 border-none p-0 focus:ring-0 focus:outline-none bg-transparent",placeholder:"Field label"}),(0,p.jsx)("span",{className:"text-xs bg-gray-100 text-gray-600 px-2 py-1 rounded",children:s.type})]}),(0,p.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,p.jsx)("button",{onClick:()=>o(!d),className:"p-1 text-gray-400 hover:text-gray-600",children:(0,p.jsx)(m.A,{className:"h-4 w-4"})}),(0,p.jsx)("button",{onClick:r,className:"p-1 text-red-400 hover:text-red-600",children:(0,p.jsx)(x.A,{className:"h-4 w-4"})})]})]}),(0,p.jsx)("div",{className:"mb-3",children:"textarea"===s.type?(0,p.jsx)("textarea",{placeholder:s.placeholder||s.label,className:"w-full border border-gray-300 rounded-md px-3 py-2 bg-gray-50",rows:3,disabled:!0}):"select"===s.type?(0,p.jsxs)("select",{className:"w-full border border-gray-300 rounded-md px-3 py-2 bg-gray-50",disabled:!0,children:[(0,p.jsx)("option",{children:"Choose an option..."}),s.options.map(((e,s)=>(0,p.jsx)("option",{children:e},s)))]}):(0,p.jsx)("input",{type:s.type,placeholder:s.placeholder||s.label,className:"w-full border border-gray-300 rounded-md px-3 py-2 bg-gray-50",disabled:!0})}),d&&(0,p.jsxs)("div",{className:"space-y-3 pt-3 border-t border-gray-200",children:[(0,p.jsxs)("div",{className:"flex items-center",children:[(0,p.jsx)("input",{type:"checkbox",id:"required-".concat(s.id),checked:s.is_required,onChange:e=>t({is_required:e.target.checked}),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),(0,p.jsx)("label",{htmlFor:"required-".concat(s.id),className:"ml-2 block text-sm text-gray-900",children:"Required field"})]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Placeholder text"}),(0,p.jsx)("input",{type:"text",value:s.placeholder,onChange:e=>t({placeholder:e.target.value}),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter placeholder..."})]}),("select"===s.type||"radio"===s.type||"checkbox"===s.type)&&(0,p.jsxs)("div",{children:[(0,p.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Options (one per line)"}),(0,p.jsx)("textarea",{value:s.options.join("\n"),onChange:e=>t({options:e.target.value.split("\n").filter((e=>e.trim()))}),rows:3,className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"Option 1\nOption 2\nOption 3"})]})]})]})},h=()=>{const e=(0,r.Zp)(),{formId:s}=(0,r.g)(),l=(0,d.jE)(),m=!!s,[x,h]=(0,a.useState)({name:"",title:"",description:"",fields:[],success_message:"Thank you for your submission!",email_notifications:[]}),g=(0,o.n)({mutationFn:e=>m?u.A.put("/forms/".concat(s),e):u.A.post("/forms",e),onSuccess:()=>{l.invalidateQueries(["forms"]),e("/forms")}});return(0,p.jsxs)("div",{className:"max-w-4xl mx-auto space-y-6",children:[(0,p.jsxs)("div",{className:"flex items-center justify-between",children:[(0,p.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,p.jsx)("button",{onClick:()=>e("/forms"),className:"p-2 text-gray-500 hover:text-gray-700",children:(0,p.jsx)(n.A,{className:"h-5 w-5"})}),(0,p.jsxs)("div",{children:[(0,p.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:m?"Edit Form":"Create New Form"}),(0,p.jsx)("p",{className:"text-sm text-gray-600",children:"Build custom forms to capture leads"})]})]}),(0,p.jsx)("div",{className:"flex items-center space-x-3",children:(0,p.jsxs)("button",{onClick:()=>{g.mutate(x)},disabled:g.isLoading,className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 disabled:opacity-50",children:[(0,p.jsx)(i.A,{className:"h-4 w-4 mr-2"}),g.isLoading?"Saving...":"Save Form"]})})]}),(0,p.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,p.jsxs)("div",{className:"bg-white shadow rounded-lg p-6",children:[(0,p.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Form Settings"}),(0,p.jsxs)("div",{className:"space-y-4",children:[(0,p.jsxs)("div",{children:[(0,p.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Form Name (Internal)"}),(0,p.jsx)("input",{type:"text",value:x.name,onChange:e=>h((s=>(0,t.A)((0,t.A)({},s),{},{name:e.target.value}))),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"Contact Form"})]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Form Title (Public)"}),(0,p.jsx)("input",{type:"text",value:x.title,onChange:e=>h((s=>(0,t.A)((0,t.A)({},s),{},{title:e.target.value}))),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"Contact Us"})]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),(0,p.jsx)("textarea",{value:x.description,onChange:e=>h((s=>(0,t.A)((0,t.A)({},s),{},{description:e.target.value}))),rows:3,className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"Form description..."})]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Success Message"}),(0,p.jsx)("textarea",{value:x.success_message,onChange:e=>h((s=>(0,t.A)((0,t.A)({},s),{},{success_message:e.target.value}))),rows:2,className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]})]}),(0,p.jsxs)("div",{className:"mt-6",children:[(0,p.jsx)("h4",{className:"text-sm font-medium text-gray-900 mb-3",children:"Add Field"}),(0,p.jsx)("div",{className:"grid grid-cols-2 gap-2",children:[{type:"text",label:"Text"},{type:"email",label:"Email"},{type:"phone",label:"Phone"},{type:"textarea",label:"Text Area"},{type:"select",label:"Dropdown"},{type:"checkbox",label:"Checkbox"}].map((e=>{let{type:s,label:l}=e;return(0,p.jsx)("button",{onClick:()=>(e=>{const s={id:Date.now().toString(),label:"New ".concat(e," field"),type:e,is_required:!1,options:"select"===e||"radio"===e||"checkbox"===e?["Option 1","Option 2"]:[],placeholder:"",validation_rules:{}};h((e=>(0,t.A)((0,t.A)({},e),{},{fields:[...e.fields,s]})))})(s),className:"p-2 text-left border border-gray-200 rounded-lg hover:bg-gray-50 text-sm",children:l},s)}))})]})]}),(0,p.jsx)("div",{className:"lg:col-span-2 bg-white shadow rounded-lg",children:(0,p.jsxs)("div",{className:"p-6",children:[(0,p.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-6",children:"Form Fields"}),x.fields.length>0?(0,p.jsx)("div",{className:"space-y-4",children:x.fields.map(((e,s)=>(0,p.jsx)(b,{field:e,index:s,onUpdate:s=>((e,s)=>{h((l=>(0,t.A)((0,t.A)({},l),{},{fields:l.fields.map((l=>l.id===e?(0,t.A)((0,t.A)({},l),s):l))})))})(e.id,s),onDelete:()=>{return s=e.id,void h((e=>(0,t.A)((0,t.A)({},e),{},{fields:e.fields.filter((e=>e.id!==s))})));var s}},e.id)))}):(0,p.jsxs)("div",{className:"text-center py-12",children:[(0,p.jsx)(c.A,{className:"mx-auto h-12 w-12 text-gray-400"}),(0,p.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No fields yet"}),(0,p.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Add fields to your form using the controls on the left."})]})]})})]})]})}}}]);
//# sourceMappingURL=550.e90df1fb.chunk.js.map